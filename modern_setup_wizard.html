<!DOCTYPE html>
<html lang="en">
<head>
    <script src="flavorcraft-navigation.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Wizard - Culinary Intelligence</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #fafafa;
            --bg-tertiary: #f5f5f5;
            --border-subtle: #e5e7eb;
            --border-default: #d1d5db;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --text-tertiary: #9ca3af;
            --accent-purple: #6366f1;
            --accent-purple-hover: #4f46e5;
            --accent-orange: #f97316;
            --accent-green: #10b981;
            --surface-hover: #f9fafb;
            --gradient-primary: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
            --gradient-subtle: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
        }

        [data-theme="dark"] {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-tertiary: #1a1a1a;
            --border-subtle: #222222;
            --border-default: #333333;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --text-tertiary: #666666;
            --surface-hover: #1f1f1f;
            --gradient-subtle: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
            min-height: 100vh;
            padding: 20px;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 24px;
            right: 24px;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-default);
            border-radius: 8px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .theme-toggle:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
        }

        .theme-icon {
            width: 20px;
            height: 20px;
            transition: transform 0.3s ease;
        }

        .theme-toggle:hover .theme-icon {
            transform: rotate(180deg);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .progress-bar {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .progress-track {
            width: 100%;
            height: 8px;
            background-color: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 4px;
            width: 10%;
            transition: width 0.5s ease;
        }

        .progress-text {
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .page {
            display: none;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .page.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .page-title {
            font-size: clamp(1.8rem, 4vw, 2.2rem);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 30px;
            text-align: center;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .balance-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .balance-option {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .balance-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-primary);
            transform: scaleX(0);
            transition: transform 0.2s ease;
        }

        .balance-option:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
        }

        .balance-option:hover::before {
            transform: scaleX(1);
        }

        .balance-option.selected {
            border-color: var(--accent-purple);
            background: var(--gradient-subtle);
            transform: translateY(-2px);
        }

        .balance-option.selected::before {
            transform: scaleX(1);
        }

        .option-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .option-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .recommendation {
            background-color: var(--accent-purple);
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 500;
            text-transform: none;
            letter-spacing: normal;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .option-description {
            color: var(--text-secondary);
            line-height: 1.5;
            font-size: 0.9rem;
        }

        .info-section {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
        }

        .info-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-content {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .info-details {
            display: grid;
            gap: 12px;
        }

        .info-item {
            padding: 16px;
            background-color: var(--bg-primary);
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
        }

        .info-item-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .question-section {
            margin-bottom: 32px;
        }

        .question-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .draggable-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .draggable-item {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-default);
            padding: 16px 20px;
            border-radius: 8px;
            cursor: grab;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .draggable-item:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
            transform: translateX(4px);
        }

        .drag-handle {
            font-size: 1.2rem;
            color: var(--text-tertiary);
        }

        .text-input {
            width: 100%;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-default);
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 1rem;
            color: var(--text-primary);
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .text-input:focus {
            outline: none;
            border-color: var(--accent-purple);
            background-color: var(--surface-hover);
        }

        .text-input::placeholder {
            color: var(--text-tertiary);
        }

        .input-group {
            margin-bottom: 24px;
        }

        .input-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 16px;
        }

        .input-row {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .remove-btn {
            background-color: #fee2e2;
            border: 1px solid #fecaca;
            color: #dc2626;
            width: 36px;
            height: 36px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .remove-btn:hover {
            background-color: #fecaca;
            border-color: #f87171;
        }

        .add-btn {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-default);
            color: var(--text-secondary);
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.875rem;
            font-weight: 500;
            font-family: inherit;
        }

        .add-btn:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
            color: var(--text-primary);
        }

        .slider-container {
            margin: 24px 0;
        }

        .tolerance-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(to right, 
                var(--accent-green) 0%, 
                var(--accent-orange) 50%, 
                #dc2626 100%);
            outline: none;
            cursor: pointer;
            -webkit-appearance: none;
        }

        .tolerance-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--text-primary);
            cursor: pointer;
            border: 2px solid var(--bg-primary);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .tolerance-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--text-primary);
            cursor: pointer;
            border: 2px solid var(--bg-primary);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 12px;
            font-size: 0.8rem;
            color: var(--text-tertiary);
        }

        .skill-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .skill-option {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .skill-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-primary);
            transform: scaleX(0);
            transition: transform 0.2s ease;
        }

        .skill-option:hover {
            border-color: var(--accent-purple);
            transform: translateY(-2px);
        }

        .skill-option:hover::before {
            transform: scaleX(1);
        }

        .skill-option.selected {
            border-color: var(--accent-purple);
            background: var(--gradient-subtle);
            transform: translateY(-2px);
        }

        .skill-option.selected::before {
            transform: scaleX(1);
        }

        .skill-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .skill-description {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .dropdown-section {
            margin-bottom: 20px;
        }

        .dropdown-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-default);
            border-radius: 8px;
            padding: 16px 20px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .dropdown-header:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
        }

        .dropdown-header.open {
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
            border-bottom-color: transparent;
        }

        .dropdown-title {
            font-weight: 500;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .dropdown-arrow {
            transition: transform 0.3s ease;
            color: var(--text-secondary);
        }

        .dropdown-arrow.rotated {
            transform: rotate(180deg);
        }

        .dropdown-content {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-default);
            border-top: none;
            border-radius: 0 0 8px 8px;
            padding: 20px;
            display: none;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: var(--bg-tertiary);
            padding: 10px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }

        .checkbox-item:hover {
            background-color: var(--surface-hover);
            border-color: var(--border-default);
        }

        .checkbox {
            width: 16px;
            height: 16px;
            border-radius: 3px;
            border: 2px solid var(--border-default);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .checkbox.checked {
            background-color: var(--accent-purple);
            border-color: var(--accent-purple);
        }

        .checkbox.checked::after {
            content: '✓';
            color: white;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
        }

        .nav-btn {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-default);
            color: var(--text-secondary);
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: inherit;
        }

        .nav-btn:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
            color: var(--text-primary);
            transform: translateY(-1px);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .nav-btn.primary {
            background-color: var(--accent-purple);
            color: white;
            border-color: var(--accent-purple);
        }

        .nav-btn.primary:hover {
            background-color: var(--accent-purple-hover);
            border-color: var(--accent-purple-hover);
            color: white;
        }

        @media (max-width: 768px) {
            .balance-options {
                grid-template-columns: 1fr;
            }
            
            .skill-options {
                grid-template-columns: 1fr;
            }
            
            .checkbox-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation {
                flex-direction: column;
                gap: 12px;
            }

            .nav-btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* Status indicator */
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 24px;
            justify-content: center;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background-color: var(--accent-green);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
    </style>
</head>
<body>
    <div class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
        <svg class="theme-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
    </div>

    <div class="container">
        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-track">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Step 1 of 10</div>
        </div>

        <!-- Page 1: Balance Profile Selection -->
        <div class="page active" id="page1">
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span>Setup in progress</span>
            </div>
            <h1 class="page-title">Pick your balance profile!</h1>
            
            <div class="balance-options">
                <div class="balance-option" onclick="selectBalance('custom')" data-balance="custom">
                    <div class="option-header">
                        <div class="option-title">CUSTOM</div>
                        <div class="recommendation">Recommended for home cooks</div>
                    </div>
                    <div class="option-description">
                        Create a personalized palette to help us configure your perfect dish! We'll ask you questions about your preferences and background.
                    </div>
                </div>

                <div class="balance-option" onclick="selectBalance('refined')" data-balance="refined">
                    <div class="option-header">
                        <div class="option-title">REFINED</div>
                        <div class="recommendation">Recommended for fine dining kitchens</div>
                    </div>
                    <div class="option-description">
                        We have configured this based on the average balance of dishes found in some of the best kitchens globally.
                    </div>
                </div>

                <div class="balance-option" onclick="selectBalance('generic')" data-balance="generic">
                    <div class="option-header">
                        <div class="option-title">GENERIC</div>
                        <div class="recommendation">Recommended for general kitchens</div>
                    </div>
                    <div class="option-description">
                        This is based on thousands of online recipes targeted to the general public, with mass appeal.
                    </div>
                </div>
            </div>

            <div class="info-section">
                <div class="info-title">
                    <span>ℹ️</span>
                    What is the balance of a dish?
                </div>
                <div class="info-content">
                    The balance refers to the ratios of Salt, Acid, Umami, Sweetness, Bitterness and Spice in any given dish.
                </div>
                <div class="info-details">
                    <div class="info-item">
                        <div class="info-item-title">Custom</div>
                        Create a personalised palette to help us configure <strong>your</strong> perfect dish!
                    </div>
                    <div class="info-item">
                        <div class="info-item-title">Refined</div>
                        We have configured this off the average balance of dishes found in some of the best kitchens globally.
                    </div>
                    <div class="info-item">
                        <div class="info-item-title">Generic</div>
                        This is based off thousands of online recipes targeted to the general public, with targeting mass appeal.
                    </div>
                </div>
            </div>

            <p style="text-align: center; color: var(--text-tertiary); font-size: 0.875rem; margin-bottom: 20px;">
                You can change this later, and adjust values manually later on!
            </p>
        </div>

        <!-- Page 2: Food Style Preferences -->
        <div class="page" id="page2">
            <h1 class="page-title">Let's learn about your taste preferences</h1>
            
            <div class="question-section">
                <div class="question-title">Question 1: Re-order these styles of food in order of preference</div>
                <div class="draggable-list" id="foodStyles">
                    <div class="draggable-item" draggable="true">
                        <span class="drag-handle">⋮⋮</span>
                        <span>Sweet & Sour</span>
                    </div>
                    <div class="draggable-item" draggable="true">
                        <span class="drag-handle">⋮⋮</span>
                        <span>Fast Food</span>
                    </div>
                    <div class="draggable-item" draggable="true">
                        <span class="drag-handle">⋮⋮</span>
                        <span>Comfort Food</span>
                    </div>
                    <div class="draggable-item" draggable="true">
                        <span class="drag-handle">⋮⋮</span>
                        <span>Fine Dining</span>
                    </div>
                    <div class="draggable-item" draggable="true">
                        <span class="drag-handle">⋮⋮</span>
                        <span>Street Food</span>
                    </div>
                    <div class="draggable-item" draggable="true">
                        <span class="drag-handle">⋮⋮</span>
                        <span>Home Cooking</span>
                    </div>
                </div>
            </div>

            <div class="question-section">
                <div class="question-title">Question 2: Where did you grow up?</div>
                <input type="text" class="text-input" placeholder="Enter your location..." id="growUpLocation">
            </div>
        </div>

        <!-- Page 3: Personal Preferences -->
        <div class="page" id="page3">
            <h1 class="page-title">Tell us more about your favorites</h1>
            
            <div class="question-section">
                <div class="question-title">Question 3: What are some of your favourite dishes?</div>
                <div class="input-list" id="favoriteDishes">
                    <div class="input-row">
                        <input type="text" class="text-input" placeholder="Enter a favorite dish...">
                        <button class="remove-btn" onclick="removeInput(this)">×</button>
                    </div>
                </div>
                <button class="add-btn" onclick="addInput('favoriteDishes')">+ Add another dish</button>
            </div>

            <div class="question-section">
                <div class="question-title">Question 4: What is your favourite cuisine?</div>
                <input type="text" class="text-input" placeholder="e.g., Italian, Japanese, Mexican..." id="favoriteCuisine">
            </div>
        </div>

        <!-- Page 4: Ingredients & Preferences -->
        <div class="page" id="page4">
            <h1 class="page-title">Your ingredient preferences</h1>
            
            <div class="question-section">
                <div class="question-title">Question 5: Favourite ingredients?</div>
                <p style="color: var(--text-secondary); margin-bottom: 15px; font-size: 0.875rem;">
                    Can be sauces, condiments, vegetables, etc.
                </p>
                <div class="input-list" id="favoriteIngredients">
                    <div class="input-row">
                        <input type="text" class="text-input" placeholder="Enter a favorite ingredient...">
                        <button class="remove-btn" onclick="removeInput(this)">×</button>
                    </div>
                </div>
                <button class="add-btn" onclick="addInput('favoriteIngredients')">+ Add another ingredient</button>
            </div>

            <div class="question-section">
                <div class="question-title">Question 6: Disliked ingredients?</div>
                <div class="input-list" id="dislikedIngredients">
                    <div class="input-row">
                        <input type="text" class="text-input" placeholder="Enter a disliked ingredient...">
                        <button class="remove-btn" onclick="removeInput(this)">×</button>
                    </div>
                </div>
                <button class="add-btn" onclick="addInput('dislikedIngredients')">+ Add another ingredient</button>
            </div>
        </div>

        <!-- Page 5: Spice Tolerance & Allergies -->
        <div class="page" id="page5">
            <h1 class="page-title">Spice tolerance and dietary restrictions</h1>
            
            <div class="question-section">
                <div class="question-title">Question 7: How would you rate your spice tolerance?</div>
                <div class="slider-container">
                    <input type="range" min="1" max="100" value="50" class="tolerance-slider" id="spiceTolerance">
                    <div class="slider-labels">
                        <span>Mild (Bell peppers)</span>
                        <span>Medium (Jalapeño)</span>
                        <span>Hot (Habanero)</span>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 12px; color: var(--text-secondary); font-weight: 500;">
                    <span id="spiceLevel">Medium tolerance</span>
                </div>
            </div>

            <div class="question-section">
                <div class="question-title">Question 8: Allergies?</div>
                <div class="checkbox-grid" id="majorAllergies" style="margin-bottom: 20px;">
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <span>Milk/Dairy</span>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <span>Eggs</span>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <span>Peanuts</span>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <span>Tree Nuts</span>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <span>Soy</span>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <span>Wheat/Gluten</span>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <span>Fish</span>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <span>Shellfish</span>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <span>Sesame</span>
                    </div>
                </div>
                
                <div style="margin-top: 24px;">
                    <div style="font-weight: 500; color: var(--text-primary); margin-bottom: 12px;">Other allergies:</div>
                    <div class="input-list" id="otherAllergies">
                        <div class="input-row">
                            <input type="text" class="text-input" placeholder="Enter any other allergies...">
                            <button class="remove-btn" onclick="removeInput(this)">×</button>
                        </div>
                    </div>
                    <button class="add-btn" onclick="addInput('otherAllergies')">+ Add another allergy</button>
                </div>
            </div>
        </div>

        <!-- Page 6: Cooking Setup Introduction -->
        <div class="page" id="page6">
            <h1 class="page-title">Now let's set up your kitchen</h1>
            
            <div class="info-content" style="text-align: center; font-size: 1.1rem; margin-bottom: 32px; color: var(--text-secondary);">
                Please answer these questions in the way you are wanting to cook. This will help us configure the recipes to become most accessible to you.
            </div>

            <div class="question-section">
                <div class="question-title">Question 1: Select your available cooking tools</div>
                
                <div class="dropdown-section">
                    <div class="dropdown-header" onclick="toggleDropdown('cookingMethods')">
                        <div class="dropdown-title">Cooking Methods</div>
                        <div class="dropdown-arrow" id="arrow-cookingMethods">▼</div>
                    </div>
                    <div class="dropdown-content" id="content-cookingMethods">
                        <div class="checkbox-grid">
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Stovetop</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Oven</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Grill</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Microwave</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Air Fryer</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Deep Fryer</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dropdown-section">
                    <div class="dropdown-header" onclick="toggleDropdown('cookingTools')">
                        <div class="dropdown-title">Kitchen Tools & Equipment</div>
                        <div class="dropdown-arrow" id="arrow-cookingTools">▼</div>
                    </div>
                    <div class="dropdown-content" id="content-cookingTools">
                        <div class="checkbox-grid">
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Food Processor</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Stand Mixer</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Immersion Blender</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Slow Cooker</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Pressure Cooker</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Rice Cooker</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Cast Iron Pan</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Wok</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Dutch Oven</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Mandoline</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Kitchen Scale</span>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <div class="checkbox"></div>
                                <span>Mortar & Pestle</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 7: Skill Level & Sourcing -->
        <div class="page" id="page7">
            <h1 class="page-title">Final setup questions</h1>
            
            <div class="question-section">
                <div class="question-title">Question 2: What would you say your current skill level in the kitchen is?</div>
                <div class="skill-options">
                    <div class="skill-option" onclick="selectSkill(this, 'beginner')" data-skill="beginner">
                        <div class="skill-title">Beginner</div>
                        <div class="skill-description">I'm just starting out and prefer simple recipes with clear instructions</div>
                    </div>
                    <div class="skill-option" onclick="selectSkill(this, 'intermediate')" data-skill="intermediate">
                        <div class="skill-title">Intermediate</div>
                        <div class="skill-description">I'm comfortable with basic techniques and ready for more complex recipes</div>
                    </div>
                    <div class="skill-option" onclick="selectSkill(this, 'advanced')" data-skill="advanced">
                        <div class="skill-title">Advanced</div>
                        <div class="skill-description">I'm experienced with advanced techniques and enjoy challenging recipes</div>
                    </div>
                </div>
            </div>

            <div class="question-section">
                <div class="question-title">Question 3: Ingredient Sourcing?</div>
                <div class="skill-options">
                    <div class="skill-option" onclick="selectSourcing(this, 'general')" data-sourcing="general">
                        <div class="skill-title">Readily available to general public</div>
                        <div class="skill-description">I shop at regular supermarkets and prefer common ingredients</div>
                    </div>
                    <div class="skill-option" onclick="selectSourcing(this, 'specialty')" data-sourcing="specialty">
                        <div class="skill-title">Access to specialty stores</div>
                        <div class="skill-description">I have access to specialty food stores, farmers markets, or online specialty ingredients</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 8: Setup Complete -->
        <div class="page" id="page8">
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span>Setup complete</span>
            </div>
            <h1 class="page-title">🎉 Setup Complete!</h1>
            
            <div class="info-content" style="text-align: center; font-size: 1.1rem; margin-bottom: 40px; color: var(--text-secondary);">
                We have set your custom palette as your auto balance. You can change this later!
            </div>
        </div>

        <!-- Navigation -->
        <div class="navigation">
            <button class="nav-btn" id="prevBtn" onclick="previousPage()">
                <span>←</span>
                <span>Previous</span>
            </button>
            <button class="nav-btn" id="nextBtn" onclick="nextPage()">
                <span>Next</span>
                <span>→</span>
            </button>
        </div>
    </div>

    <script>
        let currentPage = 1;
        let totalPages = 8;
        let selectedBalance = null;
        let selectedSkill = null;
        let selectedSourcing = null;

        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            
            if (currentTheme === 'dark') {
                body.removeAttribute('data-theme');
                localStorage.setItem('theme', 'light');
            } else {
                body.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
            }
        }

        function updateProgress() {
            const progress = (currentPage / totalPages) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `Step ${currentPage} of ${totalPages}`;
        }

        function showPage(pageNum) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show current page
            document.getElementById(`page${pageNum}`).classList.add('active');
            
            // Update navigation buttons
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            // Hide previous button on first page
            if (pageNum === 1) {
                prevBtn.style.display = 'none';
                nextBtn.style.display = 'none'; // Hide next button too on first page
            } else {
                prevBtn.style.display = 'flex';
                prevBtn.disabled = false;
                
                // Show next button for middle pages
                if (pageNum === totalPages) {
                    nextBtn.style.display = 'none';
                    // Replace next button with Start Cooking button
                    nextBtn.textContent = 'Start Cooking!';
                    nextBtn.innerHTML = '<span>Start Cooking!</span><span>🍳</span>';
                    nextBtn.classList.add('primary');
                    nextBtn.onclick = completeSetup;
                    nextBtn.style.display = 'flex';
                } else {
                    nextBtn.style.display = 'flex';
                    nextBtn.innerHTML = '<span>Next</span><span>→</span>';
                    nextBtn.classList.remove('primary');
                    nextBtn.onclick = nextPage;
                }
            }
            
            updateProgress();
        }

        function nextPage() {
            if (currentPage === 1 && !selectedBalance) {
                alert('Please select a balance profile to continue');
                return;
            }
            
            if (currentPage === 1 && selectedBalance !== 'custom') {
                // Skip custom questions if not custom
                currentPage = 6;
            } else if (currentPage < totalPages) {
                currentPage++;
            }
            
            showPage(currentPage);
        }

        function previousPage() {
            if (currentPage === 6 && selectedBalance !== 'custom') {
                // Go back to balance selection if skipped custom questions
                currentPage = 1;
            } else if (currentPage > 1) {
                currentPage--;
            }
            
            showPage(currentPage);
        }

        function selectBalance(type) {
            // Remove previous selections
            document.querySelectorAll('.balance-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selection to clicked option
            event.target.classList.add('selected');
            selectedBalance = type;
            
            console.log('Selected balance:', type);
            
            // Auto-advance to next page after selection
            setTimeout(() => {
                if (type === 'custom') {
                    currentPage = 2; // Go to taste preferences page
                } else {
                    currentPage = 6; // Skip to kitchen setup page
                }
                showPage(currentPage);
            }, 500); // Small delay for visual feedback
        }

        function selectSkill(element, skill) {
            document.querySelectorAll('.skill-option').forEach(option => {
                option.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedSkill = skill;
            console.log('Selected skill:', skill);
        }

        function selectSourcing(element, sourcing) {
            document.querySelectorAll('[data-sourcing]').forEach(option => {
                option.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedSourcing = sourcing;
            console.log('Selected sourcing:', sourcing);
        }

        function toggleDropdown(id) {
            const header = document.querySelector(`#arrow-${id}`).parentElement;
            const content = document.getElementById(`content-${id}`);
            const arrow = document.getElementById(`arrow-${id}`);
            
            header.classList.toggle('open');
            
            if (content.style.display === 'none' || content.style.display === '') {
                content.style.display = 'block';
                arrow.classList.add('rotated');
            } else {
                content.style.display = 'none';
                arrow.classList.remove('rotated');
            }
        }

        function toggleCheckbox(element) {
            const checkbox = element.querySelector('.checkbox');
            checkbox.classList.toggle('checked');
            console.log('Toggled:', element.querySelector('span').textContent);
        }

        function addInput(containerId) {
            const container = document.getElementById(containerId);
            const newRow = document.createElement('div');
            newRow.className = 'input-row';
            newRow.innerHTML = `
                <input type="text" class="text-input" placeholder="Enter another item...">
                <button class="remove-btn" onclick="removeInput(this)">×</button>
            `;
            container.appendChild(newRow);
        }

        function removeInput(button) {
            const row = button.parentElement;
            const container = row.parentElement;
            if (container.children.length > 1) {
                row.remove();
            }
        }

        // Drag and drop functionality
        let draggedElement = null;

        document.addEventListener('DOMContentLoaded', function() {
            // Load saved theme preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.setAttribute('data-theme', 'dark');
            }

            const draggableItems = document.querySelectorAll('.draggable-item');
            
            draggableItems.forEach(item => {
                item.addEventListener('dragstart', function(e) {
                    draggedElement = this;
                    this.style.opacity = '0.5';
                });
                
                item.addEventListener('dragend', function(e) {
                    this.style.opacity = '1';
                    draggedElement = null;
                });
                
                item.addEventListener('dragover', function(e) {
                    e.preventDefault();
                });
                
                item.addEventListener('drop', function(e) {
                    e.preventDefault();
                    if (draggedElement !== this) {
                        const container = this.parentNode;
                        const allItems = Array.from(container.children);
                        const draggedIndex = allItems.indexOf(draggedElement);
                        const targetIndex = allItems.indexOf(this);
                        
                        if (draggedIndex < targetIndex) {
                            container.insertBefore(draggedElement, this.nextSibling);
                        } else {
                            container.insertBefore(draggedElement, this);
                        }
                    }
                });
            });

            // Spice tolerance slider
            const spiceSlider = document.getElementById('spiceTolerance');
            const spiceLevel = document.getElementById('spiceLevel');
            
            spiceSlider.addEventListener('input', function() {
                const value = parseInt(this.value);
                let level;
                
                if (value < 30) {
                    level = 'Mild tolerance - Bell peppers, sweet peppers';
                } else if (value < 70) {
                    level = 'Medium tolerance - Jalapeño, chipotle';
                } else {
                    level = 'High tolerance - Habanero, ghost pepper';
                }
                
                spiceLevel.textContent = level;
            });

            // Initialize
            showPage(1);
        });
    </script>
</body>
</html>
                