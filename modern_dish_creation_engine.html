<!DOCTYPE html>
<html lang="en">
<head>
    <script src="flavorcraft-navigation.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlavorCraft - Dish Creation Engine</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #fafafa;
            --bg-tertiary: #f5f5f5;
            --border-subtle: #e5e7eb;
            --border-default: #d1d5db;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --text-tertiary: #9ca3af;
            --accent-purple: #6366f1;
            --accent-purple-hover: #4f46e5;
            --accent-orange: #f97316;
            --accent-green: #10b981;
            --surface-hover: #f9fafb;
            --gradient-primary: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
            --gradient-subtle: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
        }

        [data-theme="dark"] {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-tertiary: #1a1a1a;
            --border-subtle: #222222;
            --border-default: #333333;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --text-tertiary: #666666;
            --surface-hover: #1f1f1f;
            --gradient-subtle: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
            min-height: 100vh;
            padding: 20px;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 24px;
            right: 24px;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-default);
            border-radius: 8px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .theme-toggle:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
        }

        .theme-icon {
            width: 20px;
            height: 20px;
            transition: transform 0.3s ease;
        }

        .theme-toggle:hover .theme-icon {
            transform: rotate(180deg);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 24px 32px;
        }

        .back-btn {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-default);
            border-radius: 8px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-secondary);
            font-size: 1.2rem;
            font-weight: 600;
        }

        .back-btn:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
            color: var(--text-primary);
            transform: translateY(-1px);
        }

        .header-content {
            text-align: center;
            flex-grow: 1;
        }

        .page-title {
            font-size: clamp(2rem, 4vw, 2.5rem);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subscription-info {
            background-color: var(--accent-orange);
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            display: inline-block;
        }

        /* Status indicator */
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background-color: var(--accent-green);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .input-section {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .section-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .text-input {
            width: 100%;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-default);
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 1rem;
            color: var(--text-primary);
            transition: all 0.2s ease;
            min-height: 80px;
            resize: vertical;
            font-family: inherit;
        }

        .text-input:focus {
            outline: none;
            border-color: var(--accent-purple);
            background-color: var(--surface-hover);
        }

        .text-input::placeholder {
            color: var(--text-tertiary);
        }

        .slider-container {
            margin: 16px 0;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background-color: var(--bg-tertiary);
            outline: none;
            cursor: pointer;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--accent-purple);
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--accent-purple);
            cursor: pointer;
            border: none;
        }

        .quick-select {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        .time-btn {
            flex: 1;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-default);
            color: var(--text-secondary);
            padding: 12px 16px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            font-family: inherit;
        }

        .time-btn:hover,
        .time-btn.selected {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
            color: var(--text-primary);
            transform: translateY(-1px);
        }

        .mood-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .mood-btn {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-default);
            color: var(--text-secondary);
            padding: 12px 8px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            font-size: 0.875rem;
            font-family: inherit;
        }

        .mood-btn:hover,
        .mood-btn.selected {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
            color: var(--text-primary);
            transform: translateY(-2px);
        }

        .advanced-toggle {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-default);
            color: var(--text-secondary);
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 16px;
            width: 100%;
            text-align: center;
            font-family: inherit;
        }

        .advanced-toggle:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
            color: var(--text-primary);
        }

        .advanced-section {
            display: none;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-subtle);
        }

        .advanced-section.open {
            display: block;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .balance-section {
            text-align: center;
            margin: 24px 0;
        }

        .balance-btn {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-default);
            color: var(--text-secondary);
            padding: 12px 32px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .balance-btn:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
            color: var(--text-primary);
            transform: translateY(-1px);
        }

        .create-btn {
            background-color: var(--accent-purple);
            border: none;
            color: white;
            padding: 16px 40px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
            margin-top: 24px;
            font-family: inherit;
        }

        .create-btn:hover {
            background-color: var(--accent-purple-hover);
            transform: translateY(-2px);
        }

        /* Recipe Output Styles */
        .recipe-container {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-default);
            border-radius: 12px;
            padding: 32px;
        }

        .recipe-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .recipe-title {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .recipe-actions {
            display: flex;
            gap: 12px;
        }

        .action-btn {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-default);
            color: var(--text-secondary);
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.875rem;
            font-family: inherit;
        }

        .action-btn:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
            color: var(--text-primary);
            transform: translateY(-1px);
        }

        .recipe-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .meta-item {
            background-color: var(--bg-tertiary);
            padding: 16px;
            border-radius: 8px;
            text-align: center;
        }

        .meta-label {
            font-size: 0.875rem;
            color: var(--text-tertiary);
            margin-bottom: 4px;
        }

        .meta-value {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .ingredients-section,
        .method-section {
            margin-bottom: 32px;
        }

        .section-header {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--border-default);
        }

        .ingredient-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 16px;
            margin-bottom: 12px;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            transition: all 0.2s ease;
            flex-wrap: wrap;
            gap: 12px;
        }

        .ingredient-item:hover {
            background-color: var(--surface-hover);
            border-color: var(--border-default);
        }

        .ingredient-main {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 250px;
        }

        .ingredient-name {
            font-weight: 500;
            color: var(--text-primary);
        }

        .ingredient-help {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-default);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.75rem;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .ingredient-help:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
            transform: scale(1.1);
        }

        .ingredient-controls {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .ingredient-amount {
            font-weight: 600;
            color: var(--text-primary);
            min-width: 60px;
            text-align: right;
        }

        .swap-dropdown {
            position: relative;
        }

        .swap-btn {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-default);
            color: var(--text-secondary);
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
            font-family: inherit;
        }

        .swap-btn:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
            color: var(--text-primary);
        }

        .swap-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-default);
            border-radius: 8px;
            padding: 8px;
            min-width: 200px;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .swap-menu.open {
            display: block;
            animation: slideDown 0.2s ease-out;
        }

        .swap-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s ease;
            margin-bottom: 4px;
        }

        .swap-option:hover {
            background-color: var(--surface-hover);
        }

        .swap-option:last-child {
            margin-bottom: 0;
        }

        .swap-name {
            font-size: 0.875rem;
            color: var(--text-primary);
            font-weight: 500;
        }

        .swap-match {
            font-size: 0.75rem;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .match-excellent {
            background-color: rgba(16, 185, 129, 0.2);
            color: var(--accent-green);
        }

        .match-good {
            background-color: rgba(245, 158, 11, 0.2);
            color: var(--accent-orange);
        }

        .match-fair {
            background-color: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        .ingredient-tooltip {
            position: relative;
        }

        .ingredient-tooltip-content {
            visibility: hidden;
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--text-primary);
            color: var(--bg-primary);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            line-height: 1.3;
            width: 200px;
            z-index: 1001;
            opacity: 0;
            transition: all 0.3s ease;
            text-align: center;
        }

        .ingredient-tooltip-content::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -4px;
            border-width: 4px;
            border-style: solid;
            border-color: var(--text-primary) transparent transparent transparent;
        }

        .ingredient-tooltip:hover .ingredient-tooltip-content {
            visibility: visible;
            opacity: 1;
        }

        .method-step {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            position: relative;
        }

        .step-number {
            background-color: var(--accent-purple);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            position: absolute;
            top: -16px;
            left: 20px;
            font-size: 0.875rem;
        }

        .step-content {
            margin-left: 16px;
            padding-top: 12px;
        }

        .step-text {
            font-size: 1rem;
            color: var(--text-primary);
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .help-tooltips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .help-btn {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-default);
            color: var(--text-secondary);
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            font-family: inherit;
        }

        .help-btn:hover {
            background-color: var(--surface-hover);
            border-color: var(--accent-purple);
            color: var(--text-primary);
            transform: translateY(-1px);
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip-content {
            visibility: hidden;
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--text-primary);
            color: var(--bg-primary);
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 0.875rem;
            line-height: 1.4;
            width: 250px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .tooltip-content::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--text-primary) transparent transparent transparent;
        }

        .tooltip:hover .tooltip-content {
            visibility: visible;
            opacity: 1;
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 16px;
            }

            .header {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }
            
            .quick-select {
                flex-direction: column;
            }
            
            .mood-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .recipe-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .recipe-actions {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
        <svg class="theme-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
    </div>

    <div class="container">
        <!-- Input Page -->
        <div class="page active" id="inputPage">
            <!-- Header -->
            <header class="header">
                <button class="back-btn" onclick="goBack()">‚Üê</button>
                <div class="header-content">
                    <div class="status-indicator">
                        <div class="status-dot"></div>
                        <span>Engine ready</span>
                    </div>
                    <h1 class="page-title">Dish Creation Engine</h1>
                    <div class="subscription-info">5 more dishes remaining this week</div>
                </div>
                <div style="width: 40px;"></div>
            </header>

            <!-- Text Input -->
            <div class="input-section">
                <h2 class="section-title">üéØ What do you want to cook?</h2>
                <textarea class="text-input" id="dishInput" placeholder="Tell us anything! 'Something comforting with pasta', 'I want to impress my date', 'Quick dinner with chicken and vegetables', 'Italian-inspired but healthy'..."></textarea>
            </div>

            <!-- Portions -->
            <div class="input-section">
                <h2 class="section-title">üë• Portions</h2>
                <div class="slider-container">
                    <div class="slider-label">
                        <span>How many people?</span>
                        <span id="portionValue">4 people</span>
                    </div>
                    <input type="range" class="slider" id="portionSlider" min="1" max="12" value="4" oninput="updatePortions(this.value)">
                </div>
            </div>

            <!-- Time Constraint -->
            <div class="input-section">
                <h2 class="section-title">‚è∞ Time Constraint</h2>
                <div class="quick-select">
                    <button class="time-btn" onclick="selectTime(this, '15-30')">15-30 min</button>
                    <button class="time-btn selected" onclick="selectTime(this, '30-90')">30-90 min</button>
                    <button class="time-btn" onclick="selectTime(this, 'no-limit')">No limit</button>
                </div>
            </div>

            <!-- Context/Mood -->
            <div class="input-section">
                <h2 class="section-title">üí≠ What's your mood? (Optional)</h2>
                <div class="mood-grid">
                    <button class="mood-btn" onclick="selectMood(this)">Comfort</button>
                    <button class="mood-btn" onclick="selectMood(this)">Adventurous</button>
                    <button class="mood-btn" onclick="selectMood(this)">Healthy</button>
                    <button class="mood-btn" onclick="selectMood(this)">Indulgent</button>
                    <button class="mood-btn" onclick="selectMood(this)">Quick & Easy</button>
                    <button class="mood-btn" onclick="selectMood(this)">Impressive</button>
                </div>
                <textarea class="text-input" id="moodInput" placeholder="Can't decide? Describe your mood in your own words..." style="min-height: 60px; margin-top: 15px;"></textarea>
            </div>

            <!-- Ingredient Constraints -->
            <div class="input-section">
                <h2 class="section-title">ü•¨ Ingredient Constraints</h2>
                <textarea class="text-input" id="constraintsInput" placeholder="What do you have? What do you want to avoid? (Optional)" style="min-height: 60px;"></textarea>
            </div>

            <!-- Advanced Options -->
            <div class="input-section">
                <button class="advanced-toggle" onclick="toggleAdvanced()">
                    <span id="advancedToggleText">Show Advanced Options ‚ñº</span>
                </button>
                <div class="advanced-section" id="advancedSection">
                    <h3 class="section-title">üîß Cooking Method Preference</h3>
                    <div class="quick-select">
                        <button class="time-btn selected" onclick="selectMethod(this)">Auto (recommended)</button>
                        <button class="time-btn" onclick="selectMethod(this)">Roast</button>
                        <button class="time-btn" onclick="selectMethod(this)">Sous Vide</button>
                        <button class="time-btn" onclick="selectMethod(this)">Grill</button>
                    </div>
                    
                    <h3 class="section-title" style="margin-top: 25px;">üìà Difficulty Level Override</h3>
                    <div class="quick-select">
                        <button class="time-btn" onclick="selectDifficulty(this)">Beginner</button>
                        <button class="time-btn selected" onclick="selectDifficulty(this)">Intermediate</button>
                        <button class="time-btn" onclick="selectDifficulty(this)">Advanced</button>
                    </div>

                    <h3 class="section-title" style="margin-top: 25px;">‚ö° Professional Settings</h3>
                    <div class="mood-grid">
                        <button class="mood-btn" onclick="toggleProfessional(this)">Modern Ingredients</button>
                        <button class="mood-btn" onclick="toggleProfessional(this)">Preservation Methods</button>
                        <button class="mood-btn" onclick="toggleProfessional(this)">Unleashed Mode</button>
                    </div>
                    <div style="margin-top: 12px; font-size: 0.875rem; color: var(--text-secondary); font-style: italic;">
                        <strong>Unleashed Mode:</strong> No limitations on equipment access, ingredient availability, or time constraints - purely focused on maximizing the dish's potential.
                    </div>
                </div>
            </div>

            <!-- Balance Selector -->
            <div class="balance-section">
                <button class="balance-btn" onclick="openBalanceSelector()">‚öñÔ∏è Adjust Flavor Balance</button>
            </div>

            <!-- Create Button -->
            <button class="create-btn" onclick="createDish()">Create My Dish</button>
        </div>

        <!-- Recipe Output Page -->
        <div class="page" id="recipePage">
            <!-- Header -->
            <header class="header">
                <button class="back-btn" onclick="goBackToInput()">‚Üê</button>
                <div class="header-content">
                    <div class="status-indicator">
                        <div class="status-dot"></div>
                        <span>Recipe generated</span>
                    </div>
                    <h1 class="page-title">Your Recipe</h1>
                    <div class="subscription-info">4 more dishes remaining this week</div>
                </div>
                <div style="width: 40px;"></div>
            </header>

            <div class="recipe-container">
                <div class="recipe-header">
                    <h2 class="recipe-title">Pan-Seared Chicken with Lemon Herb Sauce</h2>
                    <div class="recipe-actions">
                        <button class="action-btn" onclick="editRecipe()">‚úèÔ∏è Edit</button>
                        <button class="action-btn" onclick="saveRecipe()">üíæ Save</button>
                    </div>
                </div>

                <div class="recipe-meta">
                    <div class="meta-item">
                        <div class="meta-label">Serves</div>
                        <div class="meta-value">4 people</div>
                    </div>
                    <div class="meta-item">
                        <div class="meta-label">Total Time</div>
                        <div class="meta-value">35 minutes</div>
                    </div>
                    <div class="meta-item">
                        <div class="meta-label">Difficulty</div>
                        <div class="meta-value">Intermediate</div>
                    </div>
                    <div class="meta-item">
                        <div class="meta-label">Mood Match</div>
                        <div class="meta-value">Adventurous</div>
                    </div>
                </div>

                <div class="ingredients-section">
                    <h3 class="section-header">Ingredients</h3>
                    <div class="ingredient-item">
                        <div class="ingredient-main">
                            <span class="ingredient-name">Chicken breasts (boneless, skinless)</span>
                            <div class="ingredient-tooltip">
                                <span class="ingredient-help">?</span>
                                <div class="ingredient-tooltip-content">Boneless for even cooking and easy slicing. Skinless reduces fat but loses flavor.</div>
                            </div>
                        </div>
                        <div class="ingredient-controls">
                            <span class="ingredient-amount">600g</span>
                            <div class="swap-dropdown">
                                <button class="swap-btn" onclick="toggleSwapMenu(this)">‚áÑ Swap</button>
                                <div class="swap-menu">
                                    <div class="swap-option" onclick="swapIngredient(this, 'Chicken thighs (boneless)')">
                                        <span class="swap-name">Chicken thighs (boneless)</span>
                                        <span class="swap-match match-excellent">95%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Turkey breast')">
                                        <span class="swap-name">Turkey breast</span>
                                        <span class="swap-match match-good">85%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Pork tenderloin')">
                                        <span class="swap-name">Pork tenderloin</span>
                                        <span class="swap-match match-good">80%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Firm white fish')">
                                        <span class="swap-name">Firm white fish</span>
                                        <span class="swap-match match-fair">70%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ingredient-item">
                        <div class="ingredient-main">
                            <span class="ingredient-name">Fresh lemons</span>
                            <div class="ingredient-tooltip">
                                <span class="ingredient-help">?</span>
                                <div class="ingredient-tooltip-content">Fresh lemons provide both juice and zest. Bottled juice lacks aromatic oils.</div>
                            </div>
                        </div>
                        <div class="ingredient-controls">
                            <span class="ingredient-amount">120g</span>
                            <div class="swap-dropdown">
                                <button class="swap-btn" onclick="toggleSwapMenu(this)">‚áÑ Swap</button>
                                <div class="swap-menu">
                                    <div class="swap-option" onclick="swapIngredient(this, 'Fresh limes')">
                                        <span class="swap-name">Fresh limes</span>
                                        <span class="swap-match match-excellent">90%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Fresh orange')">
                                        <span class="swap-name">Fresh orange</span>
                                        <span class="swap-match match-good">75%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'White wine vinegar')">
                                        <span class="swap-name">White wine vinegar</span>
                                        <span class="swap-match match-fair">65%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Bottled lemon juice')">
                                        <span class="swap-name">Bottled lemon juice</span>
                                        <span class="swap-match match-fair">60%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ingredient-item">
                        <div class="ingredient-main">
                            <span class="ingredient-name">Fresh thyme sprigs</span>
                            <div class="ingredient-tooltip">
                                <span class="ingredient-help">?</span>
                                <div class="ingredient-tooltip-content">Fresh thyme has delicate, complex flavor. Dried can substitute but use 1/3 amount.</div>
                            </div>
                        </div>
                        <div class="ingredient-controls">
                            <span class="ingredient-amount">6g</span>
                            <div class="swap-dropdown">
                                <button class="swap-btn" onclick="toggleSwapMenu(this)">‚áÑ Swap</button>
                                <div class="swap-menu">
                                    <div class="swap-option" onclick="swapIngredient(this, 'Fresh rosemary')">
                                        <span class="swap-name">Fresh rosemary</span>
                                        <span class="swap-match match-excellent">88%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Fresh oregano')">
                                        <span class="swap-name">Fresh oregano</span>
                                        <span class="swap-match match-good">82%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Dried thyme')">
                                        <span class="swap-name">Dried thyme</span>
                                        <span class="swap-match match-good">75%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Fresh sage')">
                                        <span class="swap-name">Fresh sage</span>
                                        <span class="swap-match match-fair">70%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ingredient-item">
                        <div class="ingredient-main">
                            <span class="ingredient-name">Garlic cloves</span>
                            <div class="ingredient-tooltip">
                                <span class="ingredient-help">?</span>
                                <div class="ingredient-tooltip-content">Fresh garlic provides sharp flavor. Size varies - adjust to preference.</div>
                            </div>
                        </div>
                        <div class="ingredient-controls">
                            <span class="ingredient-amount">18g</span>
                            <div class="swap-dropdown">
                                <button class="swap-btn" onclick="toggleSwapMenu(this)">‚áÑ Swap</button>
                                <div class="swap-menu">
                                    <div class="swap-option" onclick="swapIngredient(this, 'Shallots')">
                                        <span class="swap-name">Shallots</span>
                                        <span class="swap-match match-good">80%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Garlic paste')">
                                        <span class="swap-name">Garlic paste</span>
                                        <span class="swap-match match-good">85%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Garlic powder')">
                                        <span class="swap-name">Garlic powder</span>
                                        <span class="swap-match match-good">75%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Green onions')">
                                        <span class="swap-name">Green onions</span>
                                        <span class="swap-match match-fair">65%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ingredient-item">
                        <div class="ingredient-main">
                            <span class="ingredient-name">Extra virgin olive oil</span>
                            <div class="ingredient-tooltip">
                                <span class="ingredient-help">?</span>
                                <div class="ingredient-tooltip-content">Lower smoke point but better flavor. Use regular olive oil for high heat.</div>
                            </div>
                        </div>
                        <div class="ingredient-controls">
                            <span class="ingredient-amount">45g</span>
                            <div class="swap-dropdown">
                                <button class="swap-btn" onclick="toggleSwapMenu(this)">‚áÑ Swap</button>
                                <div class="swap-menu">
                                    <div class="swap-option" onclick="swapIngredient(this, 'Regular olive oil')">
                                        <span class="swap-name">Regular olive oil</span>
                                        <span class="swap-match match-excellent">95%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Avocado oil')">
                                        <span class="swap-name">Avocado oil</span>
                                        <span class="swap-match match-excellent">90%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Vegetable oil')">
                                        <span class="swap-name">Vegetable oil</span>
                                        <span class="swap-match match-good">80%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Butter')">
                                        <span class="swap-name">Butter</span>
                                        <span class="swap-match match-fair">70%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ingredient-item">
                        <div class="ingredient-main">
                            <span class="ingredient-name">Unsalted butter</span>
                            <div class="ingredient-tooltip">
                                <span class="ingredient-help">?</span>
                                <div class="ingredient-tooltip-content">Allows salt control. Adds richness and creates sauce emulsion.</div>
                            </div>
                        </div>
                        <div class="ingredient-controls">
                            <span class="ingredient-amount">28g</span>
                            <div class="swap-dropdown">
                                <button class="swap-btn" onclick="toggleSwapMenu(this)">‚áÑ Swap</button>
                                <div class="swap-menu">
                                    <div class="swap-option" onclick="swapIngredient(this, 'Salted butter')">
                                        <span class="swap-name">Salted butter</span>
                                        <span class="swap-match match-excellent">90%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Vegan butter')">
                                        <span class="swap-name">Vegan butter</span>
                                        <span class="swap-match match-good">80%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Heavy cream')">
                                        <span class="swap-name">Heavy cream</span>
                                        <span class="swap-match match-good">75%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Olive oil')">
                                        <span class="swap-name">Olive oil</span>
                                        <span class="swap-match match-fair">65%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ingredient-item">
                        <div class="ingredient-main">
                            <span class="ingredient-name">Dry white wine</span>
                            <div class="ingredient-tooltip">
                                <span class="ingredient-help">?</span>
                                <div class="ingredient-tooltip-content">Adds acidity and depth. Choose drinking quality, avoid sweet wines.</div>
                            </div>
                        </div>
                        <div class="ingredient-controls">
                            <span class="ingredient-amount">120g</span>
                            <div class="swap-dropdown">
                                <button class="swap-btn" onclick="toggleSwapMenu(this)">‚áÑ Swap</button>
                                <div class="swap-menu">
                                    <div class="swap-option" onclick="swapIngredient(this, 'Vermouth')">
                                        <span class="swap-name">Vermouth</span>
                                        <span class="swap-match match-excellent">90%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Chicken stock')">
                                        <span class="swap-name">Chicken stock</span>
                                        <span class="swap-match match-good">85%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'White wine vinegar')">
                                        <span class="swap-name">White wine vinegar</span>
                                        <span class="swap-match match-fair">70%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Water + lemon')">
                                        <span class="swap-name">Water + lemon</span>
                                        <span class="swap-match match-fair">60%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ingredient-item">
                        <div class="ingredient-main">
                            <span class="ingredient-name">Sea salt & black pepper</span>
                            <div class="ingredient-tooltip">
                                <span class="ingredient-help">?</span>
                                <div class="ingredient-tooltip-content">Sea salt has complex flavor. Fresh ground pepper is more aromatic.</div>
                            </div>
                        </div>
                        <div class="ingredient-controls">
                            <span class="ingredient-amount">To taste</span>
                            <div class="swap-dropdown">
                                <button class="swap-btn" onclick="toggleSwapMenu(this)">‚áÑ Swap</button>
                                <div class="swap-menu">
                                    <div class="swap-option" onclick="swapIngredient(this, 'Kosher salt')">
                                        <span class="swap-name">Kosher salt</span>
                                        <span class="swap-match match-excellent">95%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Table salt')">
                                        <span class="swap-name">Table salt</span>
                                        <span class="swap-match match-good">85%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'White pepper')">
                                        <span class="swap-name">White pepper</span>
                                        <span class="swap-match match-good">80%</span>
                                    </div>
                                    <div class="swap-option" onclick="swapIngredient(this, 'Herb salt blend')">
                                        <span class="swap-name">Herb salt blend</span>
                                        <span class="swap-match match-good">75%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="method-section">
                    <h3 class="section-header">Method</h3>
                    
                    <div class="method-step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <div class="step-text">
                                Prepare the chicken by patting completely dry with paper towels, then season generously with salt and pepper on both sides. Let rest at room temperature for 15 minutes.
                            </div>
                            <div class="help-tooltips">
                                <div class="tooltip">
                                    <button class="help-btn">? Why pat dry?</button>
                                    <div class="tooltip-content">Moisture prevents proper browning. Dry surface allows Maillard reaction to occur, creating flavor and appealing color.</div>
                                </div>
                                <div class="tooltip">
                                    <button class="help-btn">? Why room temperature?</button>
                                    <div class="tooltip-content">Cold meat contracts when it hits the hot pan, leading to uneven cooking. Room temperature ensures even heat distribution.</div>
                                </div>
                                <div class="tooltip">
                                    <button class="help-btn">? Seasoning timing</button>
                                    <div class="tooltip-content">Salt draws out moisture initially, then reabsorbs, creating better seasoning penetration and improved texture.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="method-step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <div class="step-text">
                                Heat olive oil in a large skillet over medium-high heat until shimmering. Carefully place chicken in pan, presentation side down first. Do not move for 4-5 minutes.
                            </div>
                            <div class="help-tooltips">
                                <div class="tooltip">
                                    <button class="help-btn">? Oil temperature</button>
                                    <div class="tooltip-content">Shimmering oil (not smoking) is 175-190¬∞C - perfect for searing without burning. Too cool and chicken steams, too hot and it burns.</div>
                                </div>
                                <div class="tooltip">
                                    <button class="help-btn">? Don't move chicken</button>
                                    <div class="tooltip-content">Moving too early prevents proper browning and can cause sticking. The chicken will release naturally when properly seared.</div>
                                </div>
                                <div class="tooltip">
                                    <button class="help-btn">? Presentation side first</button>
                                    <div class="tooltip-content">The first side seared always looks better. Start with the side you'll present upward for best visual appeal.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="method-step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <div class="step-text">
                                Flip chicken when golden brown and cook another 3-4 minutes until internal temperature reaches 74¬∞C. Remove chicken to a warm plate and tent with foil.
                            </div>
                            <div class="help-tooltips">
                                <div class="tooltip">
                                    <button class="help-btn">? Internal temperature</button>
                                    <div class="tooltip-content">74¬∞C ensures safe consumption while maintaining juiciness. Higher temperatures dry out the meat.</div>
                                </div>
                                <div class="tooltip">
                                    <button class="help-btn">? Tenting with foil</button>
                                    <div class="tooltip-content">Keeps chicken warm while allowing it to rest. Resting redistributes juices throughout the meat for better texture.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="method-step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <div class="step-text">
                                In the same pan, add minced garlic and cook for 30 seconds until fragrant. Add white wine and scrape up any browned bits from the bottom of the pan.
                            </div>
                            <div class="help-tooltips">
                                <div class="tooltip">
                                    <button class="help-btn">? Why same pan?</button>
                                    <div class="tooltip-content">The browned bits (fond) contain concentrated flavor that forms the base of your sauce. Never waste this liquid gold!</div>
                                </div>
                                <div class="tooltip">
                                    <button class="help-btn">? Garlic timing</button>
                                    <div class="tooltip-content">Garlic burns quickly. 30 seconds in hot oil releases oils without bitterness. Watch for color change, not just time.</div>
                                </div>
                                <div class="tooltip">
                                    <button class="help-btn">? Deglazing process</button>
                                    <div class="tooltip-content">Alcohol dissolves proteins and caramelized sugars stuck to pan. Scraping releases these flavors into your sauce.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="method-step">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <div class="step-text">
                                Add lemon juice, thyme leaves, and butter. Swirl pan to create a glossy emulsion. Season with salt and pepper. Let sauce reduce for 2-3 minutes until slightly thickened.
                            </div>
                            <div class="help-tooltips">
                                <div class="tooltip">
                                    <button class="help-btn">? Butter emulsion</button>
                                    <div class="tooltip-content">Cold butter whisked into hot liquid creates a silky, glossy sauce. The fat coats your palate, carrying flavors more effectively.</div>
                                </div>
                                <div class="tooltip">
                                    <button class="help-btn">? Thyme leaves only</button>
                                    <div class="tooltip-content">Stems can be woody and unpleasant. Strip leaves by running your fingers against the grain of the stem.</div>
                                </div>
                                <div class="tooltip">
                                    <button class="help-btn">? Sauce consistency</button>
                                    <div class="tooltip-content">It should coat the back of a spoon lightly. Too thick becomes gluey, too thin won't adhere to the chicken.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="method-step">
                        <div class="step-number">6</div>
                        <div class="step-content">
                            <div class="step-text">
                                Slice chicken diagonally into thick pieces (2cm) to show the golden crust and pink interior. Arrange on warmed plates and spoon sauce over. Garnish with fresh thyme sprigs and lemon wedges.
                            </div>
                            <div class="help-tooltips">
                                <div class="tooltip">
                                    <button class="help-btn">? Diagonal slicing</button>
                                    <div class="tooltip-content">Cutting at an angle creates larger surface area, better sauce adhesion, and more elegant presentation than straight cuts.</div>
                                </div>
                                <div class="tooltip">
                                    <button class="help-btn">? Thick slices</button>
                                    <div class="tooltip-content">2cm thickness retains heat longer and prevents the meat from drying out. Thin slices cool too quickly.</div>
                                </div>
                                <div class="tooltip">
                                    <button class="help-btn">? Warm plates</button>
                                    <div class="tooltip-content">Hot food on cold plates cools rapidly and fat can congeal. Warm plates in 80¬∞C oven for 2-3 minutes.</div>
                                </div>
                                <div class="tooltip">
                                    <button class="help-btn">? Plating technique</button>
                                    <div class="tooltip-content">Fan slices slightly overlapping, sauce pools in natural gaps. Garnish adds color contrast and aromatic finish.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedTimeRange = '30-90';
        let selectedMood = null;
        let selectedMethod = 'Auto (recommended)';
        let selectedDifficulty = 'Intermediate';
        let professionalSettings = [];

        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            
            if (currentTheme === 'dark') {
                body.removeAttribute('data-theme');
                localStorage.setItem('theme', 'light');
            } else {
                body.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
            }
        }



        function goBackToInput() {
            document.getElementById('recipePage').classList.remove('active');
            document.getElementById('inputPage').classList.add('active');
        }

        function updatePortions(value) {
            document.getElementById('portionValue').textContent = `${value} ${value == 1 ? 'person' : 'people'}`;
        }

        function selectTime(btn, timeRange) {
            btn.parentElement.querySelectorAll('.time-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            selectedTimeRange = timeRange;
        }

        function selectMood(btn) {
            document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            selectedMood = btn.textContent;
        }

        function toggleAdvanced() {
            const section = document.getElementById('advancedSection');
            const toggleText = document.getElementById('advancedToggleText');
            
            if (section.classList.contains('open')) {
                section.classList.remove('open');
                toggleText.textContent = 'Show Advanced Options ‚ñº';
            } else {
                section.classList.add('open');
                toggleText.textContent = 'Hide Advanced Options ‚ñ≤';
            }
        }

        function selectMethod(btn) {
            btn.parentElement.querySelectorAll('.time-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            selectedMethod = btn.textContent;
        }

        function selectDifficulty(btn) {
            btn.parentElement.querySelectorAll('.time-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            selectedDifficulty = btn.textContent;
        }

        function toggleProfessional(btn) {
            const setting = btn.textContent;
            if (btn.classList.contains('selected')) {
                btn.classList.remove('selected');
                professionalSettings = professionalSettings.filter(s => s !== setting);
            } else {
                btn.classList.add('selected');
                professionalSettings.push(setting);
            }
        }



        function createDish() {
            const btn = document.querySelector('.create-btn');
            btn.style.transform = 'scale(0.95)';
            btn.textContent = 'Creating your dish...';
            
            setTimeout(() => {
                btn.style.transform = 'scale(1)';
                btn.textContent = 'Create My Dish';
                
                // Switch to recipe page
                document.getElementById('inputPage').classList.remove('active');
                document.getElementById('recipePage').classList.add('active');
            }, 1500);
        }

        function editRecipe() {
            console.log('Opening recipe editor');
            alert('Recipe editor would open - adjust ingredients, quantities, methods, etc.');
        }

        function saveRecipe() {
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = '‚úì Saved!';
            btn.style.backgroundColor = 'var(--accent-green)';
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.backgroundColor = 'var(--bg-tertiary)';
            }, 2000);
        }

        function toggleSwapMenu(button) {
            // Close any open swap menus first
            document.querySelectorAll('.swap-menu.open').forEach(menu => {
                if (menu !== button.nextElementSibling) {
                    menu.classList.remove('open');
                }
            });
            
            // Toggle the clicked menu
            const menu = button.nextElementSibling;
            menu.classList.toggle('open');
            
            // Close menu when clicking outside
            if (menu.classList.contains('open')) {
                setTimeout(() => {
                    document.addEventListener('click', function closeMenu(e) {
                        if (!menu.contains(e.target) && e.target !== button) {
                            menu.classList.remove('open');
                            document.removeEventListener('click', closeMenu);
                        }
                    });
                }, 100);
            }
        }

        function swapIngredient(option, newIngredient) {
            // Find the ingredient item and update the name
            const ingredientItem = option.closest('.ingredient-item');
            const ingredientName = ingredientItem.querySelector('.ingredient-name');
            const swapMenu = option.closest('.swap-menu');
            
            // Update the ingredient name
            ingredientName.textContent = newIngredient;
            
            // Close the swap menu
            swapMenu.classList.remove('open');
            
            // Add a brief highlight effect
            ingredientItem.style.backgroundColor = 'var(--accent-green)';
            ingredientItem.style.color = 'white';
            setTimeout(() => {
                ingredientItem.style.backgroundColor = 'var(--bg-primary)';
                ingredientItem.style.color = 'var(--text-primary)';
            }, 1000);
            
            console.log(`Ingredient swapped to: ${newIngredient}`);
        }

        // Initialize theme and animations
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved theme preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.setAttribute('data-theme', 'dark');
            }

            // Add entrance animations
            const sections = document.querySelectorAll('.input-section');
            sections.forEach((section, index) => {
                section.style.opacity = '0';
                section.style.transform = 'translateY(20px)';
                section.style.animation = `fadeInUp 0.6s ease-out ${0.1 + index * 0.1}s forwards`;
            });
        });
    </script>
</body>
</html>
                